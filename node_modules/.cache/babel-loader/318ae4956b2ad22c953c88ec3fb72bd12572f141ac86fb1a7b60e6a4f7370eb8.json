{"ast":null,"code":"import _objectSpread from\"/Users/deewilliams/Developer/projects/nodwick-copy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/deewilliams/Developer/projects/nodwick-copy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//React\nimport React,{useState}from'react';//Redux\nimport{selectUser}from'../slices/userSlice.tsx';import{useDispatch,useSelector}from'react-redux';import{addGame as addNewGame}from'../slices/allGameSlice.tsx';//Methods\nimport{addUserToGame,addGame}from'../methods.tsx';//Types\n//Bootstrap\nimport ListGroup from'react-bootstrap/ListGroup';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewGameForm=function NewGameForm(_ref){var active=_ref.active,toggle=_ref.toggle;var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),gameName=_useState2[0],setGameName=_useState2[1];var user=useSelector(selectUser);var handleChange=function handleChange(event){if(event.target){var target=event.target;setGameName(target.value);}};var handleSubmit=function handleSubmit(name){addGame(name).then(function(response){//Add active user to new game\nvar game_id=response.data.gid;var user_id=user.uid;addUserToGame(game_id,user_id);var newGame=_objectSpread(_objectSpread({},response.data),{},{user_ids:[user_id]});dispatch(addNewGame(newGame));}).catch(function(e){return console.log(e);});};var submitNewGame=function submitNewGame(event){event.preventDefault();if(gameName){handleSubmit(gameName);setGameName('');toggle();}else{//!!! Create alert for form (Bootstrap Overlay)\nconsole.log('TODO');}};if(!active)return/*#__PURE__*/_jsx(React.Fragment,{});return/*#__PURE__*/_jsx(ListGroup.Item,{className:\"newGameForm\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:submitNewGame,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"nameField\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"input\",name:\"name\",id:\"name\",placeholder:\"My new game\",value:gameName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',justifyContent:'right',gap:'3px'},children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Create\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:toggle,children:\"Cancel\"})]})]})});};export default NewGameForm;","map":{"version":3,"names":["React","useState","selectUser","useDispatch","useSelector","addGame","addNewGame","addUserToGame","ListGroup","Form","Button","jsx","_jsx","jsxs","_jsxs","NewGameForm","_ref","active","toggle","dispatch","_useState","_useState2","_slicedToArray","gameName","setGameName","user","handleChange","event","target","value","handleSubmit","name","then","response","game_id","data","gid","user_id","uid","newGame","_objectSpread","user_ids","catch","e","console","log","submitNewGame","preventDefault","Fragment","Item","className","children","onSubmit","Group","Label","Control","as","id","placeholder","onChange","style","display","justifyContent","gap","type","variant","onClick"],"sources":["/Users/deewilliams/Developer/projects/nodwick-copy/src/components/NewGameForm.tsx"],"sourcesContent":["//React\nimport React, {useState} from 'react';\n//Redux\nimport {selectUser} from '../slices/userSlice.tsx';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {addGame as addNewGame} from '../slices/allGameSlice.tsx';\n//Methods\nimport { addUserToGame, addGame } from '../methods.tsx';\n//Types\nimport {Game} from '../types.tsx';\n//Bootstrap\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\ntype GameFormProps = {\n    active: boolean;\n    toggle: () => void;\n}\n\nconst NewGameForm = ({active, toggle}: GameFormProps): JSX.Element => {\n    const dispatch = useDispatch();\n    const [gameName, setGameName] = useState('');\n    const user = useSelector(selectUser);\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>):void => {\n        if (event.target) {\n            const {target} = event;\n            setGameName(target.value);\n        }\n    } \n\n    const handleSubmit = (name:string):void => {\n        addGame(name)\n        .then((response) => {\n          //Add active user to new game\n            const game_id:string = response.data.gid;\n            const user_id:string = user.uid\n            addUserToGame(game_id, user_id);\n            const newGame:Game = {...response.data, user_ids: [user_id]}\n            dispatch(addNewGame(newGame));\n        })\n        .catch(e => console.log(e))\n    }\n\n    const submitNewGame = (event: React.FormEvent):void => {\n        event.preventDefault();\n        if (gameName) {\n            handleSubmit(gameName);\n            setGameName('');\n            toggle();\n        } else {\n            //!!! Create alert for form (Bootstrap Overlay)\n            console.log('TODO');\n        }\n        \n    }\n\n    if (!active) return <React.Fragment></React.Fragment>;\n\n    return(\n        <ListGroup.Item className='newGameForm'>\n            <Form onSubmit={submitNewGame}>\n                <Form.Group className='nameField'>\n                    <Form.Label>Name</Form.Label>\n                    <Form.Control as=\"input\" name='name' id='name' placeholder='My new game' value={gameName} onChange={handleChange}/>\n                </Form.Group>\n                <span style={{display: 'flex', justifyContent: 'right', gap: '3px'}}>\n                    <Button type='submit' variant='primary'>Create</Button>\n                    <Button variant='secondary' onClick={toggle}>Cancel</Button>\n                </span>\n            </Form>\n        </ListGroup.Item>\n    )\n}\n\nexport default NewGameForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}