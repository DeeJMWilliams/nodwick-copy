{"ast":null,"code":"var _jsxFileName = \"/Users/deewilliams/Developer/projects/nodwick-copy/src/App.tsx\",\n  _s = $RefreshSig$();\n//React & Routing\nimport { useState, useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\n//Pages\nimport Games from './pages/Games.tsx';\nimport Login from './pages/Login.tsx';\nimport Inventory from './pages/Inventory.tsx';\n//Types\n\n//Redux\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, changeUser } from './slices/userSlice.tsx';\nimport { selectGame } from './slices/gameSlice.tsx';\n//Styling\nimport './App.css';\n//Auth\nimport { useAuth0 } from '@auth0/auth0-react';\n//Methods\nimport { addUser, getUsers, getSingleUser } from './methods.tsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const {\n    user\n  } = useAuth0();\n  const dispatch = useDispatch();\n  const [alert, setAlert] = useState('');\n  const activeUser = useSelector(selectUser);\n  const activeGame = useSelector(selectGame);\n  const navigate = useNavigate();\n\n  //Move to games page on successful login\n  useEffect(() => {\n    if (activeUser.uid) {\n      navigate('/games');\n    }\n  }, [activeUser, navigate]);\n\n  //Move to inventory page on set of active game or games page on removal of active game\n  useEffect(() => {\n    if (activeGame.gid && activeUser.uid) {\n      navigate('/inventory');\n    } else if (activeUser.uid) {\n      navigate('/games');\n    }\n  }, [activeGame, activeUser, navigate]);\n  const defineUser = user => {\n    return {\n      name: user.nickname,\n      email: user.email,\n      uid: user.sub,\n      game_ids: []\n    };\n  };\n  const getUserData = user => {\n    getUsers().then(response => {\n      if (!response.data.map(user => user.uid).includes(user.sub)) {\n        createNewUser(user);\n      } else {\n        getSingleUser(user.sub).then(response => {\n          dispatch(changeUser(response.data));\n        });\n      }\n    }).catch(e => console.log(e));\n  };\n  const createNewUser = user => {\n    const userData = defineUser(user);\n    console.log(userData);\n    addUser(userData).then(response => {\n      dispatch(changeUser(response.data));\n    });\n  };\n\n  //Set active user on login\n  useEffect(() => {\n    if (user) {\n      console.log(user);\n      getUserData(user);\n    }\n  }, [user, getUserData]);\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/\",\n      element: /*#__PURE__*/_jsxDEV(Login, {\n        alertText: alert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/games\",\n      element: /*#__PURE__*/_jsxDEV(Games, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/inventory\",\n      element: /*#__PURE__*/_jsxDEV(Inventory, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }, this);\n};\n_s(App, \"pHrDoj0QtSZUtT5IZyOXgU2nFgE=\", false, function () {\n  return [useAuth0, useDispatch, useSelector, useSelector, useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Routes","Route","useNavigate","Games","Login","Inventory","useSelector","useDispatch","selectUser","changeUser","selectGame","useAuth0","addUser","getUsers","getSingleUser","jsxDEV","_jsxDEV","App","_s","user","dispatch","alert","setAlert","activeUser","activeGame","navigate","uid","gid","defineUser","name","nickname","email","sub","game_ids","getUserData","then","response","data","map","includes","createNewUser","catch","e","console","log","userData","children","path","element","alertText","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/deewilliams/Developer/projects/nodwick-copy/src/App.tsx"],"sourcesContent":["//React & Routing\nimport {useState, useEffect} from 'react';\nimport {Routes, Route} from 'react-router-dom';\nimport {useNavigate} from 'react-router-dom';\n//Pages\nimport Games from './pages/Games.tsx';\nimport Login from './pages/Login.tsx';\nimport Inventory from './pages/Inventory.tsx';\n//Types\nimport {User, Game} from './types.tsx';\n//Redux\nimport {useSelector, useDispatch} from 'react-redux';\nimport {selectUser, changeUser} from './slices/userSlice.tsx';\nimport {selectGame} from './slices/gameSlice.tsx';\n//Styling\nimport './App.css';\n//Auth\nimport {useAuth0} from '@auth0/auth0-react';\n//Methods\nimport {addUser, getUsers, getSingleUser} from './methods.tsx';\n\nconst App = (): JSX.Element => {\n  const {user} = useAuth0();\n  const dispatch = useDispatch();\n  const [alert, setAlert] = useState('');\n  const activeUser:User = useSelector(selectUser);\n  const activeGame:Game = useSelector(selectGame);\n  const navigate = useNavigate();\n\n  //Move to games page on successful login\n  useEffect(() => {\n    if (activeUser.uid) {\n      navigate('/games');\n    } \n  }, [activeUser, navigate]);\n\n  //Move to inventory page on set of active game or games page on removal of active game\n  useEffect(() => {\n    if (activeGame.gid && activeUser.uid) {\n      navigate('/inventory');\n    } else if (activeUser.uid) {\n      navigate('/games');\n    }\n  }, [activeGame, activeUser, navigate]);\n\n  const defineUser = (user) => {\n    return {\n      name: user.nickname,\n      email: user.email,\n      uid: user.sub,\n      game_ids: [],\n    }\n  }\n\n  const getUserData = (user) => {\n    getUsers()\n    .then(response => {\n      if (!response.data.map(user => user.uid).includes(user.sub)) {\n        createNewUser(user);\n      } else {\n        getSingleUser(user.sub)\n        .then(response => {\n          dispatch(changeUser(response.data));\n        })\n      }\n    })\n    .catch(e => console.log(e))\n  }\n\n  const createNewUser = (user) => {\n    const userData =  defineUser(user);\n    console.log(userData);\n    addUser(userData)\n    .then(response => {\n      dispatch(changeUser(response.data));\n    })\n  }\n\n  //Set active user on login\n  useEffect(() => {\n    if (user) {\n      console.log(user);\n      getUserData(user);\n    }\n  }, [user, getUserData])\n\n  return (\n      <Routes>\n        <Route path='/' element={<Login alertText={alert} />} />\n        <Route path='/games' element={<Games />} />\n        <Route path='/inventory'  element={<Inventory />} />\n      </Routes>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}