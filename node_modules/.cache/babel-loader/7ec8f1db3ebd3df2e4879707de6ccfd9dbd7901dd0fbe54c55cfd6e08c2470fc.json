{"ast":null,"code":"import _slicedToArray from\"/Users/deewilliams/Developer/projects/nodwick-copy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//React\nimport React,{useState}from'react';//Redux\nimport{useSelector,useDispatch}from'react-redux';import{selectGame}from'../slices/gameSlice.tsx';import{updateGame}from'../slices/allGameSlice.tsx';//Methods\nimport{getUsers,addUserToGame}from'../methods.tsx';//Types\n//Bootstrap\nimport Modal from'react-bootstrap/Modal';import Form from'react-bootstrap/Form';import CloseButton from'react-bootstrap/CloseButton';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPlayerForm=function AddPlayerForm(_ref){var active=_ref.active,toggle=_ref.toggle;var dispatch=useDispatch();var game=useSelector(selectGame);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var handleChange=function handleChange(event){if(event.target){var target=event.target;setEmail(target.value);}};var handleSubmit=function handleSubmit(event){//!!!Add handling for invalid email\nevent.preventDefault();getUsers().then(function(response){return response.data.find(function(user){return user.email===email;});}).then(function(user){if(user){addUserToGame(game.gid,user.uid).then(function(response){dispatch(updateGame(response.data));});toggle();}else{console.log('TODO');}}).catch(function(e){return console.log(e);});setEmail('');};return/*#__PURE__*/_jsxs(Modal,{show:active,children:[/*#__PURE__*/_jsx(CloseButton,{onClick:toggle}),/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Add Player\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"input\",type:\"email\",name:\"email\",placeholder:\"player@email.com\",onChange:handleChange})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:toggle,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Submit\"})]})]})]});};export default AddPlayerForm;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","selectGame","updateGame","getUsers","addUserToGame","Modal","Form","CloseButton","Button","jsx","_jsx","jsxs","_jsxs","AddPlayerForm","_ref","active","toggle","dispatch","game","_useState","_useState2","_slicedToArray","email","setEmail","handleChange","event","target","value","handleSubmit","preventDefault","then","response","data","find","user","gid","uid","console","log","catch","e","show","children","onClick","Header","Title","onSubmit","Body","Group","controlId","Label","Control","as","type","name","placeholder","onChange","Footer","variant"],"sources":["/Users/deewilliams/Developer/projects/nodwick-copy/src/components/AddPlayerForm.tsx"],"sourcesContent":["//React\nimport React, {useState} from 'react';\n//Redux\nimport {useSelector, useDispatch} from 'react-redux';\nimport {selectGame} from '../slices/gameSlice.tsx';\nimport {updateGame} from '../slices/allGameSlice.tsx';\n//Methods\nimport { getUsers, addUserToGame } from '../methods.tsx';\n//Types\nimport {Game, User} from '../types.tsx';\n//Bootstrap\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport CloseButton from 'react-bootstrap/CloseButton';\nimport Button from 'react-bootstrap/Button';\n\ntype PlayerFormProps = {\n    active: boolean;\n    toggle: () => void;\n}\n\nconst AddPlayerForm = ({active, toggle}:PlayerFormProps): JSX.Element => {\n    const dispatch = useDispatch();\n    const game:Game = useSelector(selectGame);\n    const [email, setEmail] = useState('');\n\n    const handleChange = (event:React.ChangeEvent<HTMLInputElement>):void => {\n        if (event.target) {\n            const {target} = event;\n            setEmail(target.value);\n        }\n    }\n\n    const handleSubmit = (event:React.FormEvent):void => {\n        //!!!Add handling for invalid email\n        event.preventDefault();\n        getUsers()\n        .then(response => {\n            return(\n            response.data.find((user:User) => user.email === email)\n            )   \n        })\n        .then(user => {\n            if (user) {\n                addUserToGame(game.gid, user.uid)\n                .then(response => {\n                    dispatch(updateGame(response.data));\n                });\n                toggle();\n            }\n            else {console.log('TODO')}\n        })\n        .catch(e => console.log(e))\n\n        setEmail('');\n    }\n\n    return(\n        <Modal show={active}>\n            <CloseButton onClick={toggle}/>\n            <Modal.Header>\n                <Modal.Title>Add Player</Modal.Title>\n            </Modal.Header>\n            <Form onSubmit={handleSubmit}>\n                <Modal.Body>\n                    <Form.Group controlId=\"email\">\n                        <Form.Label>Email</Form.Label>\n                        <Form.Control as=\"input\" type=\"email\" name=\"email\" placeholder=\"player@email.com\" onChange={handleChange} />\n                    </Form.Group>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={toggle}>Cancel</Button>\n                    <Button type=\"submit\" variant=\"primary\">Submit</Button>\n                </Modal.Footer>\n            </Form>\n        </Modal>\n    )\n}\n\nexport default AddPlayerForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}